{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"2021-12-01 Welcome to @domothy 's website where I freely ramble about whatever, mostly Ethereum because I believe it to be the ultimate nerd snipe . I like trying to understand the more technical aspects and I like making it available by explaining it as clearly as I possibly can. This website is powered by MkDown and Github Pages on this github repository . I first started diving down the ETH rabbithole (several rabbitholes, really) and became a fervant Ethereum apologist on reddit, then on twitter, then now i guess i wanna own my content if that makes sense. At some point repeating the same thing to reddit trolls gets old and twitter threads are a terrible format to share large amount of information. So I'll just write stuff here and link to it whenever the same topics inevitably get brought up. Expect the quality of writing to vary wildly depending on my intention with each individual post. I also intend to use this website as a repository of neat things I find and keep track of them here . Not sure if this actually matters, but: none of the content on this website is to be taken as financial advice","title":"Introduction"},{"location":"deflation/","text":"2021-12-05 \"No one is going to spend Ether if it's deflationary\" Does a deflating supply of Ether the asset help or hurt Ethereum the network? Is it actually deflationary? First, the important nitpick: Ether's supply is not inherently deflationary. It self-adjusts based on the following variables: number of stakers and demand for blockspace. Right now, the first variable doesn't come into play as the consensus is still achieved by proof-of-work, with 2 new ETH being issued roughly every 13 seconds. During times of high blockchain activity, the rate of burning outpaces the rate of issuance. But in general, the supply still inflates, just at a lower rate than before EIP-1559 was implemented. In other words, Ether only becomes deflationary when it's actively being used. If deflation is bad for spending, then overall spending will reduce and it will go back to being inflationary. After the network switches to proof-of-stake, the issuance will drop drastically (around 90%) and Ether should become deflationary for many years \u2013 possibly decades \u2013 until there comes a point where the rate of burning equals the rate of issuance. The best math available shows this will happen anywhere between 40 and 60 million Ether. Why burning fees makes sense Let's address the next question that often follows: Why have fees if they're just getting burned anyway? High gas fees are a result of limited supply vs. a lot of demand for blockspace. The cost of gas fees at any given time reflects the actual value of Ethereum's blockspace at that moment, as far as things can have value due to supply and demand. Anyone who is not in a rush to use the network can wait for the demand to go down and pay lower fees. Reducing gas fees artificially would lead to \"blockspace shortages\" and make DoS attacks against the network cheaper. The mechanism behind EIP-1559 automatically adjusts the base fee that is burned depending on how full or empty the blocks are. So why burn the fees? There are a lot of reasons to do so, but the easiest one to grasp in my opinion is this one: Since whoever creates blocks decides which transactions to include, the base fee cannot go to them as they could simply create dummy transactions to fill the blocks to artificially increase the fees everyone else has to pay. Burning the fees is a market-efficient way to avoid overpaying for blockspace, as was often the case under the first-price auction model before EIP-1559. So, the higher the demand, the higher the fees. In that regards, you're essentially paying the network itself for using the product it offers: secure, credibly-neutral blockspace. (Side-note: there is a small premium you can pay to block creators to prioritize the inclusion of your transaction, but in general, around 80-90% of the fees you pay will be burned) By virtue of holding Ether as an asset, the value created by people using the network flows in part back to you via this burning mechanism. \"Pure\" use-cases for Ether Next, let's address the core of the question: why would you spend Ether today if it's gonna be worth more later ? Simply put: it's not meant to be a currency for day-to-day usage. I would argue that the existence of Ether-the-asset only serves to achieve the following two goals: Paying for gas fees to use the network Securing the network Any other use-cases you may imagine \u2013 collateral in DeFi, speculation/trading, store of value, even using it as money \u2014 are direct results of the open and permissionless nature of Ethereum coupled with Ether's inherent scarcity and value. But as a rule of thumb, the eventual \"Ethereum utopia\" does not entail buying a loaf of bread for 0.000784 ETH and paying five times the amount in gas fees. Anyone who argues otherwise is either misinformed or willfully spreading misinformation themselves. Blockspace as a product Ethereum-the-blockchain provides a product and a service, and you have to pay for it with Ether-the-asset. As a concrete example, if VISA wants to use Ethereum as a secure layer for settling transactions , and blockspace currently costs $X per byte in USD, then VISA will buy $X's worth of Ether for every byte they want to commit to the chain. Settling their transactions will burn that amount of Ether immediately. It doesn't matter that this $X's worth of Ether might double in the next year, they need to use Ethereum's blockspace today so they buy it. And they burn it. Increased buying pressure and downward pressure on supply! Buying Ether to burn it Sooner or later a lot of people/institutions will be buying-and-burning Ether to settle any arbitrary data/computation on Ethereum. They don't have to care about it as an asset, it's just a medium to pay for blockspace. The existence of Ether-the-asset is basically nothing more than a necessary tool derived from a self-sustaining and self-adjusting network that doesn't depend on any one central entity deciding the price of blockspace nor even any one government that controls and issues the currency in which the blockspace is paid! With that in mind, Ether is a utility coin first and foremost, and its value is tied to the value of the blockspace it offers. The fact that it's gonna increase in value over time as it becomes scarcer and captures value through burning only helps Ethereum's interests: A higher price for Ether represents a higher value of the collateral staked which incentivizes validators to play by the rule to avoid losing their capital, and it's harder for an attacker to acquire the capital necessary to attack the network in any meaningful way. Since VISA knows Ether is gonna increase in price, and they know they need to settle a lot of transactions over the coming years, the best move for them is to buy a lot of Ether today for a lower cost basis instead of buying it at a higher price when the time comes to actually spend it on blockspace. If Ethereum's blockspace becomes valuable \u2013 and I believe it will \u2013 it's inevitable that Ether will become a part of every major institution's balance sheets at some point because that's the most cost-efficient way to use it. In fact, that's not true. There is a more cost efficient way to use it: Buy a lot of Ether, stake it and get 5-8% return a year, denominated in Ether . This is good for VISA as they're essentially getting Ether for \"free\" \u2013 after the initial capital investment and taxes \u2013 and it's good for Ethereum because more stakers means more network security. VISA using Ethereum as a settlement layer means their interests are aligned with Ethereum's well-being, and the same goes for all the other institutions that do the same. I personally think it's extremely bullish for Ether as an asset to picture people paying for things in fiat or stablecoins using a VISA credit card, without even knowing that Ethereum is being used indirectly under the hood to settle that transaction, which burns Ether. But of course, this VISA example is just an easy one. There are many other use-cases for Ethereum's blockspace, such as DeFi, NFTs, gaming, or blockchains leveraging Ethereum's security in the coming \"Layer 2\" ecosystem. Summary Ether's supply is not inherently deflationary, it self-adjusts depending on blockchain usage and stakers That said, it will be deflationary for many years after the switch to proof-of-stake Ether is not meant to be used as a day-to-day currency to buy goods and services directly Ethereum offers a valuable product: secure, credibly-neutral, permissionless blockspace Whoever wants to use this product has to spend Ether, a majority of which is burned The most cost-efficient way (in dollar terms) to use Ethereum is to buy Ether at today's price and stake it to have more Ether to spend later A higher value of Ether represents more network security by virtue of the proof-of-stake collateral value being higher as well Ether captures value created by the people using Ethereum through the fee burning mechanism Conclusion : Supply deflation and price appreciation are good for Ethereum as a whole Some more links Concise graph representing the long-term model with the moving parts involved, including the burn Justin Drake's tweet representing the relationship between Ether's value and Ethereum's utility ultrasound.money to see stats on EIP-1559 burn, what dapps are burning the most, and projections regarding annualized deflation and long-term supply with parameters you can tweak","title":"Deflationary Ether"},{"location":"deflation/#no-one-is-going-to-spend-ether-if-its-deflationary","text":"Does a deflating supply of Ether the asset help or hurt Ethereum the network?","title":"\"No one is going to spend Ether if it's deflationary\""},{"location":"deflation/#is-it-actually-deflationary","text":"First, the important nitpick: Ether's supply is not inherently deflationary. It self-adjusts based on the following variables: number of stakers and demand for blockspace. Right now, the first variable doesn't come into play as the consensus is still achieved by proof-of-work, with 2 new ETH being issued roughly every 13 seconds. During times of high blockchain activity, the rate of burning outpaces the rate of issuance. But in general, the supply still inflates, just at a lower rate than before EIP-1559 was implemented. In other words, Ether only becomes deflationary when it's actively being used. If deflation is bad for spending, then overall spending will reduce and it will go back to being inflationary. After the network switches to proof-of-stake, the issuance will drop drastically (around 90%) and Ether should become deflationary for many years \u2013 possibly decades \u2013 until there comes a point where the rate of burning equals the rate of issuance. The best math available shows this will happen anywhere between 40 and 60 million Ether.","title":"Is it actually deflationary?"},{"location":"deflation/#why-burning-fees-makes-sense","text":"Let's address the next question that often follows: Why have fees if they're just getting burned anyway? High gas fees are a result of limited supply vs. a lot of demand for blockspace. The cost of gas fees at any given time reflects the actual value of Ethereum's blockspace at that moment, as far as things can have value due to supply and demand. Anyone who is not in a rush to use the network can wait for the demand to go down and pay lower fees. Reducing gas fees artificially would lead to \"blockspace shortages\" and make DoS attacks against the network cheaper. The mechanism behind EIP-1559 automatically adjusts the base fee that is burned depending on how full or empty the blocks are. So why burn the fees? There are a lot of reasons to do so, but the easiest one to grasp in my opinion is this one: Since whoever creates blocks decides which transactions to include, the base fee cannot go to them as they could simply create dummy transactions to fill the blocks to artificially increase the fees everyone else has to pay. Burning the fees is a market-efficient way to avoid overpaying for blockspace, as was often the case under the first-price auction model before EIP-1559. So, the higher the demand, the higher the fees. In that regards, you're essentially paying the network itself for using the product it offers: secure, credibly-neutral blockspace. (Side-note: there is a small premium you can pay to block creators to prioritize the inclusion of your transaction, but in general, around 80-90% of the fees you pay will be burned) By virtue of holding Ether as an asset, the value created by people using the network flows in part back to you via this burning mechanism.","title":"Why burning fees makes sense"},{"location":"deflation/#pure-use-cases-for-ether","text":"Next, let's address the core of the question: why would you spend Ether today if it's gonna be worth more later ? Simply put: it's not meant to be a currency for day-to-day usage. I would argue that the existence of Ether-the-asset only serves to achieve the following two goals: Paying for gas fees to use the network Securing the network Any other use-cases you may imagine \u2013 collateral in DeFi, speculation/trading, store of value, even using it as money \u2014 are direct results of the open and permissionless nature of Ethereum coupled with Ether's inherent scarcity and value. But as a rule of thumb, the eventual \"Ethereum utopia\" does not entail buying a loaf of bread for 0.000784 ETH and paying five times the amount in gas fees. Anyone who argues otherwise is either misinformed or willfully spreading misinformation themselves.","title":"\"Pure\" use-cases for Ether"},{"location":"deflation/#blockspace-as-a-product","text":"Ethereum-the-blockchain provides a product and a service, and you have to pay for it with Ether-the-asset. As a concrete example, if VISA wants to use Ethereum as a secure layer for settling transactions , and blockspace currently costs $X per byte in USD, then VISA will buy $X's worth of Ether for every byte they want to commit to the chain. Settling their transactions will burn that amount of Ether immediately. It doesn't matter that this $X's worth of Ether might double in the next year, they need to use Ethereum's blockspace today so they buy it. And they burn it. Increased buying pressure and downward pressure on supply!","title":"Blockspace as a product"},{"location":"deflation/#buying-ether-to-burn-it","text":"Sooner or later a lot of people/institutions will be buying-and-burning Ether to settle any arbitrary data/computation on Ethereum. They don't have to care about it as an asset, it's just a medium to pay for blockspace. The existence of Ether-the-asset is basically nothing more than a necessary tool derived from a self-sustaining and self-adjusting network that doesn't depend on any one central entity deciding the price of blockspace nor even any one government that controls and issues the currency in which the blockspace is paid! With that in mind, Ether is a utility coin first and foremost, and its value is tied to the value of the blockspace it offers. The fact that it's gonna increase in value over time as it becomes scarcer and captures value through burning only helps Ethereum's interests: A higher price for Ether represents a higher value of the collateral staked which incentivizes validators to play by the rule to avoid losing their capital, and it's harder for an attacker to acquire the capital necessary to attack the network in any meaningful way. Since VISA knows Ether is gonna increase in price, and they know they need to settle a lot of transactions over the coming years, the best move for them is to buy a lot of Ether today for a lower cost basis instead of buying it at a higher price when the time comes to actually spend it on blockspace. If Ethereum's blockspace becomes valuable \u2013 and I believe it will \u2013 it's inevitable that Ether will become a part of every major institution's balance sheets at some point because that's the most cost-efficient way to use it. In fact, that's not true. There is a more cost efficient way to use it: Buy a lot of Ether, stake it and get 5-8% return a year, denominated in Ether . This is good for VISA as they're essentially getting Ether for \"free\" \u2013 after the initial capital investment and taxes \u2013 and it's good for Ethereum because more stakers means more network security. VISA using Ethereum as a settlement layer means their interests are aligned with Ethereum's well-being, and the same goes for all the other institutions that do the same. I personally think it's extremely bullish for Ether as an asset to picture people paying for things in fiat or stablecoins using a VISA credit card, without even knowing that Ethereum is being used indirectly under the hood to settle that transaction, which burns Ether. But of course, this VISA example is just an easy one. There are many other use-cases for Ethereum's blockspace, such as DeFi, NFTs, gaming, or blockchains leveraging Ethereum's security in the coming \"Layer 2\" ecosystem.","title":"Buying Ether to burn it"},{"location":"deflation/#summary","text":"Ether's supply is not inherently deflationary, it self-adjusts depending on blockchain usage and stakers That said, it will be deflationary for many years after the switch to proof-of-stake Ether is not meant to be used as a day-to-day currency to buy goods and services directly Ethereum offers a valuable product: secure, credibly-neutral, permissionless blockspace Whoever wants to use this product has to spend Ether, a majority of which is burned The most cost-efficient way (in dollar terms) to use Ethereum is to buy Ether at today's price and stake it to have more Ether to spend later A higher value of Ether represents more network security by virtue of the proof-of-stake collateral value being higher as well Ether captures value created by the people using Ethereum through the fee burning mechanism Conclusion : Supply deflation and price appreciation are good for Ethereum as a whole","title":"Summary"},{"location":"deflation/#some-more-links","text":"Concise graph representing the long-term model with the moving parts involved, including the burn Justin Drake's tweet representing the relationship between Ether's value and Ethereum's utility ultrasound.money to see stats on EIP-1559 burn, what dapps are burning the most, and projections regarding annualized deflation and long-term supply with parameters you can tweak","title":"Some more links"},{"location":"eip1559/","text":"2021-12-11 I like EIP-1559. I don't like when people spread misinformation by calling it manipulation with the only goal to deflate the supply to pump the bags of major holders while screwing over the miners in the process. I'll be honest: in this post I bring no new information, all the points mentioned here were already laid out years ago in the original proposal which you can read for yourself. I just want to try my best to make the following points slightly more accessible for anyone who has a limited understanding of Ethereum's fee market: Gas as a valuable resource First we need to clarify some key things: The amount of gas used represents how much computation your transaction requires. A transaction that uses twice as much gas as another can be thought of as being \"twice as expensive\" to run in terms of \"real world resources\" like computation, storage, bandwidth. Not all transactions are equal, some require more gas than others There is a limited amount of gas made available every block You need gas to settle transactions onto the blockchain. Things like moving money, depositing tokens into a vault, minting NFTs, etc. Therefore, each unit of gas has \"value\" as far as things can have value due to supply and demand: Limited supply of gas + High demand for gas = High cost of gas. And each unit of gas can be thought of as being a tiny \"step of computation\", so its associated cost is very small, currently on the order of 0.0000001 ETH per gas, or more commonly written out as simply \"100 gwei\" (1 ETH = 1 billion gwei). It's when a lot of gas is used at once that a transaction can get expensive, especially when the network is congested. As a quick example, a swap on mainnet can use around 150,000 units of gas: 150,000 gas \u00d7 100 gwei/gas \u00d7 0.000000001 ETH/gwei \u00d7 5,000 USD/ETH = $75 As you can see, the total fee in U.S. dollars depends on the amount of gas used, current cost of gas in gwei/gas, and the price of Ether. The actual mechanism Before EIP-1559 Before EIP-1559 arrived on mainnet on that fateful 12,965,000th block, the fee market mechanism was much easier to grasp: People posted a bid of any amount, and miners would pick the highest bidder and prioritize the inclusion of their transaction in the block they're mining. However, as soon as demand for blockspace exceeded supply, we ran into problems related to market efficiencies . Consider the following scenario: a block 100% full of transactions that all have the same bid for gas at 50 gwei/gas. Clearly, this means the value of gas at that particular point in time, as decided by the market, is 50 gwei. This means that someone willing to pay 50 gwei should be able to get their transaction confirmed in that block. But if the block is going to be full, that's impossible. You now have to up your bid to 51 gwei and bump someone else off the block in the process. Or 55, or 60, if you want to play it safe because you know other people are thinking the same way and fighting over the same limited resource. So even though the value of gas was 50 gwei, there was market inefficiency on two accounts: You paid more than the fair market value of gas Someone who paid the fair market value didn't get their transaction included in the block In a more efficient system, these two things wouldn't happen. After EIP-1559 How does EIP-1559 fixes the market inefficiency problem? Essentially by making block size more elastic. There is now 30 million units of gas available in every block, but 15 million is still the desired target. The mechanism auto-adjusts to keep the average gas used per block at 15 million. This means that in our example, the block would now be 50% full of transactions bidding 50 gwei, which means there is space for an extra transaction, which will also be priced at 50 gwei. Everybody pays the fair market value of gas! The interesting part is the introducing the \"base fee\" parameter that is calculated by a predictable mathematical formula: If the block is less than half full, the next block will have a lower base fee (up to 12.5% lower) If the block is more than half full, the next block will have a higher base fee (up to 12.5% higher) The base fee parameter is the part of the fees that gets burned. At a base fee of 50 gwei, a block containing 15 million gas would burn this much Ether: 50 gwei/gas \u00d7 15 million gas \u00d7 0.000000001 ETH/gwei = 0.75 ETH The reason for burning is simple: Whoever creates a block decides how many transactions it will include. If the base fee went to the miners/stakers, they could fill up blocks with dummy transactions from themselves to themselves, and pay the base fee to themselves and everybody else would have to pay up an arbitrarily high price. By burning the base fee, everyone pays for using blockspace. The miners/stakers can still collude to keep it high, but it's gonna cost them. The bullet points Hopefully the explanation above is clear enough that we can jump into the actual bullet points of my tweet one by one. Gives a refund to overbids Remember how previously, you would have to overbid to speed up the inclusion of your transaction in a block? If the market cost was 50 gwei, your 65 gwei bid would be accepted and you effectively overpaid by 15 gwei by playing it safe. Now, thanks to EIP-1559, you don't set \"a bid of 65 gwei per gas\". Instead, you set a \"max fee per gas of 65 gwei\", effectively telling the network you're willing to pay up to 65 gwei, and not a gwei more. If the block that includes your transaction has a base fee of 50 gwei, then 50 gwei is what you pay, and you get the 15 extra gwei back. You can overbid by as much as you want now, but you will get the difference back. No more overpaying! Tells you exactly how much next-block inclusion costs So remember the bit about the predictable math formula? If the previous block had a base fee of 100 gwei, then you know with 100% certainty that the next block will have a base fee either 12.5% lower or 12.5% higher. This way, you can bid 100 \u00d7 1.125 = 112.5 gwei and have a high degree of confidence that the next block will include your transaction. Of course, during times of high surge in demand for gas, the max limit of 30M gas per block may be hit, which would leave no room for your transaction. So what you can do is calculate two blocks ahead and set a max fee per gas of 100 \u00d7 1.125 \u00d7 1.125 = 126.6 gwei and have a high degree of confidence that your transaction will be included within the next two blocks. You can keep going for as many blocks as you want. Remember: you're not gonna overpay when your bid is higher than the actual cost of gas. Before EIP-1559, you couldn't know for sure that you bid would make it into the next block, or the one after that. Gas could arbitrarily surge 300% at once and then everyone else would follow by outbidding each other and suddenly your transaction had to wait several minutes when it could have taken 2 blocks with EIP-1559. This bit is especially important for rollups (Layer 2) who need to settle transactions on Layer 1 to reach finality of their aggregated transactions. Unexpected delays for such finality would be inconvenient as it would delay every other changes of state that the rollup needs to commit to Layer 1. Mitigates the social cost of transactions This is where it gets a bit abstract and the benefit is not immediately apparent, but it's a very important point nonetheless. The most controversial aspect of EIP-1559 is that the base fee, that used to go to miners, now goes... nowhere. It gets burned. The lost income for miners sparked a lot of outrage. But I think it's important to look at it from another perspective: Miners aren't the only ones doing the work. Every single node computes and stores every single transaction. Every single transaction makes the whole blockchain a tiny bit more heavy and difficult to verify for nodes. It's very marginal, but this social cost is still non-zero. Imagine a world where EIP-1559 was implemented from the start and someone proposed to switch to a first priced auction system where miners get all the fees. The community would ask: Why should all transaction fees go to the one lucky miner or mining pool that happened to win the hash lottery? By burning the base fee, you're essentially paying the network itself for using its scarce product: secure blockspace. Whoever pays X dollars' worth of blockspace is essentially getting \"value\" in return for their dollars, since they wouldn't initiate the transaction if it incurred them a loss. In some sense, part of the value generated by the blockspace flows back into the ecosystem as a whole, and every holder of ETH benefits proportionally. Instead of the previous system, where the value was extracted by the miner and sold to pay for hardware and electricity. It's not a direct payment to all nodes by any means, but now every node can benefit from holding ETH and get some value back for the service they provide to the network via storage, computation, bandwidth, etc. even if they're not mining or staking. Thanks to EIP-1559, a good chunk of the value stays in the ecosystem \u2013 it mitigates the social cost of transactions \u2013 which will directly contribute to the economic security of the blockchain after the switch to Proof of Stake. Prevents the economic abstraction of Ether Economic abstraction of Ether was a hot topic of debate among the community before EIP-1559 came and solved it. It was in theory possible to sign a transaction and only broadcast it to a specific miner or mining pool with a bid of 0 gwei with a payment to the miner through back channels. And it did happen, mostly by MEV flashbots who wanted to front run specific transactions. This MEV stuff is a whole different subject, but the point is, if you could bypass having to pay Ether for blockspace, this was a problem for Ether the asset, and thus a problem for the network as a whole, since Ether is what keeps it secure \u2013 a high value Ether incentivizes miners to keep the network secure, and later on the capital at stake will keep everyone honest under Proof of Stake. By burning the base fee and having the base fee be denominated in Ether, EIP-1559 solidified Ether as the currency used to pay for blockspace. MEV flashbots are no longer able to bid 0 gwei and pay a mining pool some dollars to extract value from the network for themselves and the miner. MEV is still a problem, but at least now they have to pay the base fee and, again, part of the value they would have otherwise extracted flows back into Ether which is good for anyone who has a stake in the health of the system. Makes the security model more sustainable This one requires some more context than the previous points. Security budget A blockchain needs to spend some amount on security, since it is secured via real-world resources. Most models involve minting new coins and handing it out as a reward to miners/validators. If there's more coins being printed than fees collected, then the blockchain is running at a loss: Minting new coins dilutes the value of the existing supply. So even if the users enjoy low fees, they're still paying for the chain's security budget when the value of their holdings is diluted to cover it. Unless the price of the coin keeps pumping forever, running at a loss involves minting more coins than before to pay the same amount to miners/validators in dollar terms. Which further dilutes the supply, which requires further inflation. You get the picture. It's always a fun exercise to go on tokenterminal.com and look up how much fees a blockchain collects and compare it to how much it pays its validators by doing quick math on stakingrewards.com . You'll see that a vast majority of these low-fee chains are running at a loss by a huge margin. Good for users short term, but bad for the chain itself long term. In a bull market, these chains look good because validators get more in dollar terms as the price of the coin rises. But what happens to them in a bear market? You'll have you answer by looking at the \"ETH killers\" of 2017-2018. Fee-driven security budget But clearly, Ethereum doesn't have that problem: Its fees are so high that you could just give those to the miners and have 0 inflation, no? This paper lays out the math with simulations, but it is a bit heavy. The gist of is that if the block producer's income relies entirely on volatile/unpredictable fees, the best move isn't to put up with low-fee transactions during low demand: it's to outright steal the high-fee transactions. Imagine there are 0 minted ETH and 100% of the income comes from fees: Consider a lucky miner who got the timing just right to include a whole bunch of transactions totaling 10 ETH in block #1000. The next miner however, only sees enough transactions sitting in the mempool to fill block #1001 with a total of 5 ETH in fees. The available options are: Work on mining block #1001 on top of block #1000 and earn 5 ETH Fork the chain at block #999 and work on mining an alternate block #1000 that includes the transactions from the original block #1000, to earn 10 ETH Option 2 (the \"selfish strategy\") results in a fork where miner #2 stole high-fee transactions from miner #1. The incentive for each miner is to keep mining on top of their respective fork to try to seal their right to those high-fee transactions by having the longest fork. Instead of both miners adding up their computational in a single chain and maximizing security, the security is now split in two. Add in more selfish miners that each steal high-fees transactions and you got even more forks with their own set of miners/pools competing for the transactions with the highest fees. Meanwhile users have to wait more and more blocks to be sure that the chain's history won't change because of this selfish mining strategy. As a blockchain, you want stability, and forking the chain is the opposite of that (each fork is individually easier to attack than if all the mining is done on the same fork). But as a miner, you want to maximize income. By having the fees be the majority of mining income, the interests are misaligned. When the majority of mining income is from a fixed block reward, there's no need to fork and steal the reward from block #1000 since you'll still get the same reward for mining block #1001. EIP-1559 solves this by having the best of both worlds: chain stability via perpetual issuance while offsetting inflation with the fee burn mechanism. After the merge, there is a good chance that the reduction in issuance will be largely outpaced by the fee burn for decades until the rate of issuance meets the rate of burning. No hard cap There's no hard supply cap in Ethereum's long-term model. Instead, the same result will be achieved with an equilibrium that will eventually be reached where supply inflation is close to 0% year over year. Sometimes deflation, sometimes inflation, depending on external variables over which Ethereum has no control (price of Ether, total amount of Ether staked, demand for blockspace) but can react automatically without any human input. This is why I like to say that Ethereum will reach homeostasis whereas Bitcoin will keep ossifying. To me, that is much more elegant than the alternatives: Have endless supply inflation while hoping that the price of the coin will keep rising enough to make up for it Have a hard supply cap while hoping: that the fees will be enough to cover the security budget long-term that miners will play nice with each other despite strong economic incentives to do otherwise Some archeology August 7th 2018 \u2014 EthResearch paper on resource pricing detailing inefficiencies about the current fee market model August 17th 2018 \u2014 Vitalik proposes to change Zcash fee mechanism to fix the inefficiencies November 6th 2018 \u2014 Issue #1559 is opened on the EIP repository to address the inefficiencies for Ethereum (this is where the EIP got its number!) March 1st 2019 \u2014 Ethereum-Magicians post discussing EIP-1559 April 13th 2019 \u2014 EIP-1559 proposal officially created October 2nd 2020 \u2014 Proposal for the rollup-centric roadmap which mentions the need for EIP-1559 for quicker rollup settlement with the next-block inclusion benefit August 5th 2021 \u2014 EIP-1559 finally live on mainnet with the London Hard Fork October 7th 2021 \u2014 EthResearch post calculating the long-term equilibrium of issuance vs burn November 24th 2021 \u2014 Total amount of ETH burned hits 1 million after 109 days","title":"EIP-1559"},{"location":"eip1559/#gas-as-a-valuable-resource","text":"First we need to clarify some key things: The amount of gas used represents how much computation your transaction requires. A transaction that uses twice as much gas as another can be thought of as being \"twice as expensive\" to run in terms of \"real world resources\" like computation, storage, bandwidth. Not all transactions are equal, some require more gas than others There is a limited amount of gas made available every block You need gas to settle transactions onto the blockchain. Things like moving money, depositing tokens into a vault, minting NFTs, etc. Therefore, each unit of gas has \"value\" as far as things can have value due to supply and demand: Limited supply of gas + High demand for gas = High cost of gas. And each unit of gas can be thought of as being a tiny \"step of computation\", so its associated cost is very small, currently on the order of 0.0000001 ETH per gas, or more commonly written out as simply \"100 gwei\" (1 ETH = 1 billion gwei). It's when a lot of gas is used at once that a transaction can get expensive, especially when the network is congested. As a quick example, a swap on mainnet can use around 150,000 units of gas: 150,000 gas \u00d7 100 gwei/gas \u00d7 0.000000001 ETH/gwei \u00d7 5,000 USD/ETH = $75 As you can see, the total fee in U.S. dollars depends on the amount of gas used, current cost of gas in gwei/gas, and the price of Ether.","title":"Gas as a valuable resource"},{"location":"eip1559/#the-actual-mechanism","text":"","title":"The actual mechanism"},{"location":"eip1559/#before-eip-1559","text":"Before EIP-1559 arrived on mainnet on that fateful 12,965,000th block, the fee market mechanism was much easier to grasp: People posted a bid of any amount, and miners would pick the highest bidder and prioritize the inclusion of their transaction in the block they're mining. However, as soon as demand for blockspace exceeded supply, we ran into problems related to market efficiencies . Consider the following scenario: a block 100% full of transactions that all have the same bid for gas at 50 gwei/gas. Clearly, this means the value of gas at that particular point in time, as decided by the market, is 50 gwei. This means that someone willing to pay 50 gwei should be able to get their transaction confirmed in that block. But if the block is going to be full, that's impossible. You now have to up your bid to 51 gwei and bump someone else off the block in the process. Or 55, or 60, if you want to play it safe because you know other people are thinking the same way and fighting over the same limited resource. So even though the value of gas was 50 gwei, there was market inefficiency on two accounts: You paid more than the fair market value of gas Someone who paid the fair market value didn't get their transaction included in the block In a more efficient system, these two things wouldn't happen.","title":"Before EIP-1559"},{"location":"eip1559/#after-eip-1559","text":"How does EIP-1559 fixes the market inefficiency problem? Essentially by making block size more elastic. There is now 30 million units of gas available in every block, but 15 million is still the desired target. The mechanism auto-adjusts to keep the average gas used per block at 15 million. This means that in our example, the block would now be 50% full of transactions bidding 50 gwei, which means there is space for an extra transaction, which will also be priced at 50 gwei. Everybody pays the fair market value of gas! The interesting part is the introducing the \"base fee\" parameter that is calculated by a predictable mathematical formula: If the block is less than half full, the next block will have a lower base fee (up to 12.5% lower) If the block is more than half full, the next block will have a higher base fee (up to 12.5% higher) The base fee parameter is the part of the fees that gets burned. At a base fee of 50 gwei, a block containing 15 million gas would burn this much Ether: 50 gwei/gas \u00d7 15 million gas \u00d7 0.000000001 ETH/gwei = 0.75 ETH The reason for burning is simple: Whoever creates a block decides how many transactions it will include. If the base fee went to the miners/stakers, they could fill up blocks with dummy transactions from themselves to themselves, and pay the base fee to themselves and everybody else would have to pay up an arbitrarily high price. By burning the base fee, everyone pays for using blockspace. The miners/stakers can still collude to keep it high, but it's gonna cost them.","title":"After EIP-1559"},{"location":"eip1559/#the-bullet-points","text":"Hopefully the explanation above is clear enough that we can jump into the actual bullet points of my tweet one by one.","title":"The bullet points"},{"location":"eip1559/#gives-a-refund-to-overbids","text":"Remember how previously, you would have to overbid to speed up the inclusion of your transaction in a block? If the market cost was 50 gwei, your 65 gwei bid would be accepted and you effectively overpaid by 15 gwei by playing it safe. Now, thanks to EIP-1559, you don't set \"a bid of 65 gwei per gas\". Instead, you set a \"max fee per gas of 65 gwei\", effectively telling the network you're willing to pay up to 65 gwei, and not a gwei more. If the block that includes your transaction has a base fee of 50 gwei, then 50 gwei is what you pay, and you get the 15 extra gwei back. You can overbid by as much as you want now, but you will get the difference back. No more overpaying!","title":"Gives a refund to overbids"},{"location":"eip1559/#tells-you-exactly-how-much-next-block-inclusion-costs","text":"So remember the bit about the predictable math formula? If the previous block had a base fee of 100 gwei, then you know with 100% certainty that the next block will have a base fee either 12.5% lower or 12.5% higher. This way, you can bid 100 \u00d7 1.125 = 112.5 gwei and have a high degree of confidence that the next block will include your transaction. Of course, during times of high surge in demand for gas, the max limit of 30M gas per block may be hit, which would leave no room for your transaction. So what you can do is calculate two blocks ahead and set a max fee per gas of 100 \u00d7 1.125 \u00d7 1.125 = 126.6 gwei and have a high degree of confidence that your transaction will be included within the next two blocks. You can keep going for as many blocks as you want. Remember: you're not gonna overpay when your bid is higher than the actual cost of gas. Before EIP-1559, you couldn't know for sure that you bid would make it into the next block, or the one after that. Gas could arbitrarily surge 300% at once and then everyone else would follow by outbidding each other and suddenly your transaction had to wait several minutes when it could have taken 2 blocks with EIP-1559. This bit is especially important for rollups (Layer 2) who need to settle transactions on Layer 1 to reach finality of their aggregated transactions. Unexpected delays for such finality would be inconvenient as it would delay every other changes of state that the rollup needs to commit to Layer 1.","title":"Tells you exactly how much next-block inclusion costs"},{"location":"eip1559/#mitigates-the-social-cost-of-transactions","text":"This is where it gets a bit abstract and the benefit is not immediately apparent, but it's a very important point nonetheless. The most controversial aspect of EIP-1559 is that the base fee, that used to go to miners, now goes... nowhere. It gets burned. The lost income for miners sparked a lot of outrage. But I think it's important to look at it from another perspective: Miners aren't the only ones doing the work. Every single node computes and stores every single transaction. Every single transaction makes the whole blockchain a tiny bit more heavy and difficult to verify for nodes. It's very marginal, but this social cost is still non-zero. Imagine a world where EIP-1559 was implemented from the start and someone proposed to switch to a first priced auction system where miners get all the fees. The community would ask: Why should all transaction fees go to the one lucky miner or mining pool that happened to win the hash lottery? By burning the base fee, you're essentially paying the network itself for using its scarce product: secure blockspace. Whoever pays X dollars' worth of blockspace is essentially getting \"value\" in return for their dollars, since they wouldn't initiate the transaction if it incurred them a loss. In some sense, part of the value generated by the blockspace flows back into the ecosystem as a whole, and every holder of ETH benefits proportionally. Instead of the previous system, where the value was extracted by the miner and sold to pay for hardware and electricity. It's not a direct payment to all nodes by any means, but now every node can benefit from holding ETH and get some value back for the service they provide to the network via storage, computation, bandwidth, etc. even if they're not mining or staking. Thanks to EIP-1559, a good chunk of the value stays in the ecosystem \u2013 it mitigates the social cost of transactions \u2013 which will directly contribute to the economic security of the blockchain after the switch to Proof of Stake.","title":"Mitigates the social cost of transactions"},{"location":"eip1559/#prevents-the-economic-abstraction-of-ether","text":"Economic abstraction of Ether was a hot topic of debate among the community before EIP-1559 came and solved it. It was in theory possible to sign a transaction and only broadcast it to a specific miner or mining pool with a bid of 0 gwei with a payment to the miner through back channels. And it did happen, mostly by MEV flashbots who wanted to front run specific transactions. This MEV stuff is a whole different subject, but the point is, if you could bypass having to pay Ether for blockspace, this was a problem for Ether the asset, and thus a problem for the network as a whole, since Ether is what keeps it secure \u2013 a high value Ether incentivizes miners to keep the network secure, and later on the capital at stake will keep everyone honest under Proof of Stake. By burning the base fee and having the base fee be denominated in Ether, EIP-1559 solidified Ether as the currency used to pay for blockspace. MEV flashbots are no longer able to bid 0 gwei and pay a mining pool some dollars to extract value from the network for themselves and the miner. MEV is still a problem, but at least now they have to pay the base fee and, again, part of the value they would have otherwise extracted flows back into Ether which is good for anyone who has a stake in the health of the system.","title":"Prevents the economic abstraction of Ether"},{"location":"eip1559/#makes-the-security-model-more-sustainable","text":"This one requires some more context than the previous points.","title":"Makes the security model more sustainable"},{"location":"eip1559/#security-budget","text":"A blockchain needs to spend some amount on security, since it is secured via real-world resources. Most models involve minting new coins and handing it out as a reward to miners/validators. If there's more coins being printed than fees collected, then the blockchain is running at a loss: Minting new coins dilutes the value of the existing supply. So even if the users enjoy low fees, they're still paying for the chain's security budget when the value of their holdings is diluted to cover it. Unless the price of the coin keeps pumping forever, running at a loss involves minting more coins than before to pay the same amount to miners/validators in dollar terms. Which further dilutes the supply, which requires further inflation. You get the picture. It's always a fun exercise to go on tokenterminal.com and look up how much fees a blockchain collects and compare it to how much it pays its validators by doing quick math on stakingrewards.com . You'll see that a vast majority of these low-fee chains are running at a loss by a huge margin. Good for users short term, but bad for the chain itself long term. In a bull market, these chains look good because validators get more in dollar terms as the price of the coin rises. But what happens to them in a bear market? You'll have you answer by looking at the \"ETH killers\" of 2017-2018.","title":"Security budget"},{"location":"eip1559/#fee-driven-security-budget","text":"But clearly, Ethereum doesn't have that problem: Its fees are so high that you could just give those to the miners and have 0 inflation, no? This paper lays out the math with simulations, but it is a bit heavy. The gist of is that if the block producer's income relies entirely on volatile/unpredictable fees, the best move isn't to put up with low-fee transactions during low demand: it's to outright steal the high-fee transactions. Imagine there are 0 minted ETH and 100% of the income comes from fees: Consider a lucky miner who got the timing just right to include a whole bunch of transactions totaling 10 ETH in block #1000. The next miner however, only sees enough transactions sitting in the mempool to fill block #1001 with a total of 5 ETH in fees. The available options are: Work on mining block #1001 on top of block #1000 and earn 5 ETH Fork the chain at block #999 and work on mining an alternate block #1000 that includes the transactions from the original block #1000, to earn 10 ETH Option 2 (the \"selfish strategy\") results in a fork where miner #2 stole high-fee transactions from miner #1. The incentive for each miner is to keep mining on top of their respective fork to try to seal their right to those high-fee transactions by having the longest fork. Instead of both miners adding up their computational in a single chain and maximizing security, the security is now split in two. Add in more selfish miners that each steal high-fees transactions and you got even more forks with their own set of miners/pools competing for the transactions with the highest fees. Meanwhile users have to wait more and more blocks to be sure that the chain's history won't change because of this selfish mining strategy. As a blockchain, you want stability, and forking the chain is the opposite of that (each fork is individually easier to attack than if all the mining is done on the same fork). But as a miner, you want to maximize income. By having the fees be the majority of mining income, the interests are misaligned. When the majority of mining income is from a fixed block reward, there's no need to fork and steal the reward from block #1000 since you'll still get the same reward for mining block #1001. EIP-1559 solves this by having the best of both worlds: chain stability via perpetual issuance while offsetting inflation with the fee burn mechanism. After the merge, there is a good chance that the reduction in issuance will be largely outpaced by the fee burn for decades until the rate of issuance meets the rate of burning.","title":"Fee-driven security budget"},{"location":"eip1559/#no-hard-cap","text":"There's no hard supply cap in Ethereum's long-term model. Instead, the same result will be achieved with an equilibrium that will eventually be reached where supply inflation is close to 0% year over year. Sometimes deflation, sometimes inflation, depending on external variables over which Ethereum has no control (price of Ether, total amount of Ether staked, demand for blockspace) but can react automatically without any human input. This is why I like to say that Ethereum will reach homeostasis whereas Bitcoin will keep ossifying. To me, that is much more elegant than the alternatives: Have endless supply inflation while hoping that the price of the coin will keep rising enough to make up for it Have a hard supply cap while hoping: that the fees will be enough to cover the security budget long-term that miners will play nice with each other despite strong economic incentives to do otherwise","title":"No hard cap"},{"location":"eip1559/#some-archeology","text":"August 7th 2018 \u2014 EthResearch paper on resource pricing detailing inefficiencies about the current fee market model August 17th 2018 \u2014 Vitalik proposes to change Zcash fee mechanism to fix the inefficiencies November 6th 2018 \u2014 Issue #1559 is opened on the EIP repository to address the inefficiencies for Ethereum (this is where the EIP got its number!) March 1st 2019 \u2014 Ethereum-Magicians post discussing EIP-1559 April 13th 2019 \u2014 EIP-1559 proposal officially created October 2nd 2020 \u2014 Proposal for the rollup-centric roadmap which mentions the need for EIP-1559 for quicker rollup settlement with the next-block inclusion benefit August 5th 2021 \u2014 EIP-1559 finally live on mainnet with the London Hard Fork October 7th 2021 \u2014 EthResearch post calculating the long-term equilibrium of issuance vs burn November 24th 2021 \u2014 Total amount of ETH burned hits 1 million after 109 days","title":"Some archeology"},{"location":"resources/","text":"Various resources/links of interests that I always end up referring to for various reasons. This page is mainly for my own use, but everyone else is welcome to refer to it and propose links to add. Just hit me up on twitter or make a PR on github for this file The ecosystem moves so fast that sometimes you want to look back at a tweet/chart/post you've seen last week and it's nowhere to be found. The goal of this page is to keep track of those neat things. Eth2 eth2.news for the latest news on the state of the merge, staking, etc. Rollup-centric roadmap for explanation/reasoning behind the switch from L1-focused scaling to rollup-friendly scaling Merge readiness checklist Huge roadmap diagram with progress as of December 2nd 2021 Proof of Stake Why Proof of Stake Weak Subjectivity and related twitter thread on history expiry Specification Annotated spec for a slightly more accessible version of the spec London fork Arrow glacier fork Shanghai fork Rollups Layer 2 cheat sheet The ultimate guide to L2s on Ethereum for all things rollups Sustanability of rollups + shards for why monolithic blockchains can't scale sustainably The Grand Design for an easily digestible overview of what Ethereum will look like a few years from now Short video on how StarkWare works that brilliantly illustrates the prover-verifier asymmetry that enables practically endless scaling ZK-Rollups: World Beaters Why and How zk-SNARK works , some day I'll understand this whole thing I swear zkRollups directory Statelessness Original verkle trees paper Vitalik's post on verkle trees Verkle tree structure Takes The Most Important Scarce Resource is Legitimacy by Vitalik Ethereum as bond by Natasha Che Addressing misinformation 10k top address audits BTC vs ETH Polynya addressing common criticisms about Ethereum SwagtimusPrime responding point-by-point to a misinformation thread More point-by-point response to misinformation Interviews/Talks/Conferences Vitalik \u2013 Things that matter outside of DeFi Vitalik \u2013 Conference in Argentina 47:17 \u2014 2016 Shanghai attacks and how Ethereum reacted and adapted \" every new chain that exists is eventually going to get their Shanghai attacker \" 50:44 \u2013 Open invitation to BSC to implement EVM parallelization via EIP-648 Tim Beiko \u2013 Bankless Layer 0 1:11:18 \u2013 Who can contribue EIPs and how Other things of interest Has EIP-1559 Fulfilled Its Objectives? Justin Drake's projection spreadsheets regarding supply, burn, issuance, etc. Vitalik's tweet with PoS issuance formula w.r.t total ETH staked Math behind long-term supply equilibrium What is an NFT? 6th EF research team AMA for answers to various questions I didn't know I had BSC validators running into issues related to gas limit increases My own stuff Ethereum as the \"AWS of blockchains\" Unlocking staking rewards will not cause a mass sell-off event Dune Analytics query for predicting burn milestones","title":"Resources"},{"location":"resources/#eth2","text":"eth2.news for the latest news on the state of the merge, staking, etc. Rollup-centric roadmap for explanation/reasoning behind the switch from L1-focused scaling to rollup-friendly scaling Merge readiness checklist Huge roadmap diagram with progress as of December 2nd 2021","title":"Eth2"},{"location":"resources/#proof-of-stake","text":"Why Proof of Stake Weak Subjectivity and related twitter thread on history expiry","title":"Proof of Stake"},{"location":"resources/#specification","text":"Annotated spec for a slightly more accessible version of the spec London fork Arrow glacier fork Shanghai fork","title":"Specification"},{"location":"resources/#rollups","text":"Layer 2 cheat sheet The ultimate guide to L2s on Ethereum for all things rollups Sustanability of rollups + shards for why monolithic blockchains can't scale sustainably The Grand Design for an easily digestible overview of what Ethereum will look like a few years from now Short video on how StarkWare works that brilliantly illustrates the prover-verifier asymmetry that enables practically endless scaling ZK-Rollups: World Beaters Why and How zk-SNARK works , some day I'll understand this whole thing I swear zkRollups directory","title":"Rollups"},{"location":"resources/#statelessness","text":"Original verkle trees paper Vitalik's post on verkle trees Verkle tree structure","title":"Statelessness"},{"location":"resources/#takes","text":"The Most Important Scarce Resource is Legitimacy by Vitalik Ethereum as bond by Natasha Che","title":"Takes"},{"location":"resources/#addressing-misinformation","text":"10k top address audits BTC vs ETH Polynya addressing common criticisms about Ethereum SwagtimusPrime responding point-by-point to a misinformation thread More point-by-point response to misinformation","title":"Addressing misinformation"},{"location":"resources/#interviewstalksconferences","text":"Vitalik \u2013 Things that matter outside of DeFi Vitalik \u2013 Conference in Argentina 47:17 \u2014 2016 Shanghai attacks and how Ethereum reacted and adapted \" every new chain that exists is eventually going to get their Shanghai attacker \" 50:44 \u2013 Open invitation to BSC to implement EVM parallelization via EIP-648 Tim Beiko \u2013 Bankless Layer 0 1:11:18 \u2013 Who can contribue EIPs and how","title":"Interviews/Talks/Conferences"},{"location":"resources/#other-things-of-interest","text":"Has EIP-1559 Fulfilled Its Objectives? Justin Drake's projection spreadsheets regarding supply, burn, issuance, etc. Vitalik's tweet with PoS issuance formula w.r.t total ETH staked Math behind long-term supply equilibrium What is an NFT? 6th EF research team AMA for answers to various questions I didn't know I had BSC validators running into issues related to gas limit increases","title":"Other things of interest"},{"location":"resources/#my-own-stuff","text":"Ethereum as the \"AWS of blockchains\" Unlocking staking rewards will not cause a mass sell-off event Dune Analytics query for predicting burn milestones","title":"My own stuff"}]}